<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>settings of {{.User.Name}} :: {{.Config.DepotName}}</title>
	<link rel="stylesheet" href="/static/style-const-default.css">
	<link rel="stylesheet" href="/dynamic-asset/style-const-default.css">
	<link rel="stylesheet" href="/static/style.css">
	<link rel="stylesheet" href="/static/style-setting.css">
  </head>
  <body>
	<header>
	  {{template "_header-nav" .}}
	  
	  <h1 class="header-name" style="margin-bottom: 0">Settings</h1>
	</header>
	<hr />

	<main>
	  {{template "setting/_sidebar"}}

	  <div class="setting-main main-side">
		<fieldset>
		  <legend>Change info</legend>
		  {{if .ErrorMsg}}
		  {{if eq .ErrorMsg.Type "info"}}
		  <div class="error-msg">{{.ErrorMsg.Message}}</div>
		  {{end}}
		  {{end}}
		  <form action="" method="POST">
			<input type="hidden" name="type" value="info" />
			<input type="hidden" name="username" value="{{.User.Name}}" />
			<table class="field-table">
			  <tbody>
				<tr class="field">
				  <td><label class="field-label" for="tf-title">Title:</label></td>
				  <td><input class="field-tf" name="title" id="tf-title" value="{{.User.Title}}"/></td>
				</tr>
				<tr class="field">
				  <td><label class="field-label" for="tf-email">Email:</label></td>
				  <td>{{.User.Email}}
					{{if or (not .User.Email) (le (len .User.Email) 0)}}
					<p><i>No email associated with your account? <a href="/setting/email">Go to your email setting page</a></i></p>
					{{end}}
				  </td>
				</tr>
				<tr class="field">
				  <td><label class="field-label" for="tf-website">Website:</label></td>
				  <td><input class="field-tf" name="website" id="tf-website" value="{{.User.Website}}" /></td>
				</tr>
				<tr class="field">
				  <td><label class="field-label" for="ta-bio">Bio:</label></td>
				  <td><textarea id="ta-bio" name="bio">{{.User.Bio}}</textarea></td>
				</tr>
				<tr>
				  <td></td>
				  <td>
					<input class="field-submit" type="submit" value="Change Info" />
				  </td>
				</tr>
			  </tbody>
			</table>
		  </form>
		</fieldset>

		<fieldset>
		  <legend>Change Website Preference</legend>
		  <form action="" method="POST">
			<input type="hidden" name="type" value="website-preference" />
			<input type="hidden" name="username" value="{{.User.Name}}" />
			<table class="field-table">
			  <tbody>
				<tr class="field">
				  <td><label class="field-label" for="tf-foreground-color">Foreground Color:</label></td>
				  <td><input id="tf-foreground-color" name="foreground-color" value="{{.User.WebsitePreference.ForegroundColor}}" /></td>
				</tr>
				<tr class="field">
				  <td><label class="field-label" for="tf-background-color">Background  Color:</label></td>
				  <td><input id="tf-background-color" name="background-color" value="{{.User.WebsitePreference.BackgroundColor}}" /></td>
				</tr>
				<tr class="field">
				  <td><label class="field-label" for="chkbox-use-javascript">Use Javascript:</label><span class="field-label-description">(Set this option to checked to use JavaScript-dependent version of UI)</span></td>
				  <td><input type="checkbox" id="chkbox-use-javascript" name="use-javascript" {{if .User.WebsitePreference.UseJavascript}}checked{{end}} /></td>
				</tr>
				<tr class="field">
				  <td></td>
				  <td><input type="submit" value="Save Preference" /></td>
				</tr>
			  </tbody>
			</table>
		  </form>
		</fieldset>

		<fieldset>
		  <legend>Change password</legend>
		  {{if .ErrorMsg}}
		  {{if eq .ErrorMsg.Type "password"}}
		  <div class="error-msg">{{.ErrorMsg.Message}}</div>
		  {{end}}
		  {{end}}
		  <form action="" method="POST">
			<input type="hidden" name="type" value="password" />
			<input type="hidden" name="username" value="{{.User.Name}}" />
			<table class="field-table">
			  <tbody>
				<tr class="field">
				  <td><label class="field-label" for="tf-old-password">Old Password:</label></td>
				  <td><input class="field-tf" name="old-password" id="tf-old-password" type="password" required/></td>
				</tr>
				<tr class="field">
				  <td><label class="field-label" for="tf-new-password">New Password:</label></td>
				  <td><input class="field-tf" name="new-password" id="tf-new-password" type="password" required /></td>
				</tr>
				<tr class="field">
				  <td><label class="field-label" for="tf-confirm-new-password">Confirm new password:</label></td>
				  <td><input class="field-tf" name="confirm-new-password" id="tf-confirm-new-password" type="password" required /></td>
				</tr>
				<tr>
				  <td></td>
				  <td><input class="field-submit" type="submit" value="Change Password" /></td>
				</tr>
			  </tbody>
			</table>
		  </form>
		</fieldset>
		
	  </div>
	</main>
	
    <hr />
	<footer>
	  {{template "_footer"}}
	</footer>
  </body>
</html>

